@if (selectedProducts.size > 0) {
    <div class="header-actions">
        <button
            matButton="filled"
            (click)="deleteSelected()"
            class="bulk-delete-btn"
        >
            Delete Selected ({{ selectedProducts.size }})
        </button>
    </div>
}

<div class="products-container">
    @for (product of products; track product.id) {
        <mat-card appearance="outlined" class="product-card">
            <div class="card-header">
                <mat-checkbox
                    [checked]="selectedProducts.has(product.id)"
                    (change)="toggleSelection(product.id)"
                    (click)="$event.stopPropagation()"
                    class="product-checkbox"
                ></mat-checkbox>
                <button
                    mat-icon-button
                    color="warn"
                    class="delete-btn"
                    (click)="
                        deleteProduct(product.id); $event.stopPropagation()
                    "
                    title="Delete {{ product.name }}"
                >
                    <span class="delete-icon">âœ•</span>
                </button>
            </div>

            <img
                mat-card-image
                [src]="product.imageUrl"
                alt="{{ product.name }}"
            />
            <mat-card-title>{{ product.name }}</mat-card-title>
            <mat-card-subtitle class="price"
                >${{ product.price }}</mat-card-subtitle
            >

            <mat-card-actions class="card-actions">
                <button
                    mat-raised-button
                    color="primary"
                    [routerLink]="['/update-inventory/edit', product.id]"
                    title="Edit {{ product.name }}"
                >
                    Edit
                </button>
            </mat-card-actions>
        </mat-card>
    }
</div>
<router-outlet></router-outlet>
