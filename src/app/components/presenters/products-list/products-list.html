<h2 class="products-title">All Products</h2>
<div class="products-container">
    @for (product of products; track product.id) {
        <mat-card appearance="outlined" class="product-card">
            <mat-card-header>
                <mat-card-title>{{ product.name }}</mat-card-title>
                <mat-card-subtitle class="price"
                    >${{ product.price }}</mat-card-subtitle
                >
                <mat-card-subtitle class="quantity"
                    >Quantity: {{ product.quantity }}</mat-card-subtitle
                >
            </mat-card-header>
            <div class="image-container">
                <img
                    mat-card-image
                    [src]="getCurrentImageUrl(product)"
                    alt="Photo of a {{ product.name }}"
                    class="product-image"
                />
                @if (hasMultipleImages(product)) {
                    <button
                        mat-icon-button
                        class="nav-button prev-button"
                        (click)="previousImage(product.id, product, $event)"
                        title="Previous image"
                    >
                        <mat-icon>chevron_left</mat-icon>
                    </button>
                    <button
                        mat-icon-button
                        class="nav-button next-button"
                        (click)="nextImage(product.id, product, $event)"
                        title="Next image"
                    >
                        <mat-icon>chevron_right</mat-icon>
                    </button>
                }
            </div>
            <mat-card-actions class="card-actions">
                <a
                    matButton="elevated"
                    [routerLink]="['/browse-products/product', product.id]"
                    title="View {{ product.name }}"
                    >View Product Details</a
                >
            </mat-card-actions>
        </mat-card>
    }
</div>
