<mat-toolbar class="header">
    <div class="logo-title">
        <button
            mat-icon-button
            aria-label="home button"
            [title]="'Home'"
            [routerLink]="'/'"
            class="logo"
        >
            <mat-icon>home</mat-icon>
        </button>
        <a class="title" routerLink="'/'">{{ title }}</a>
    </div>
    <nav class="nav-links">
        @for (page of publicPages; track page.title) {
            <a
                mat-button
                [routerLink]="page.url"
                routerLinkActive="active"
                [title]="page.title"
                class="nav-link"
            >
                {{ page.title }}
            </a>
        }
        @if ((userProfile$ | async)?.role === UserRole.ADMIN) {
            @for (page of adminPages; track page.title) {
                <a
                    mat-button
                    [routerLink]="page.url"
                    routerLinkActive="active"
                    [title]="page.title"
                    class="nav-link"
                >
                    {{ page.title }}
                </a>
            }
        }
    </nav>
    <div class="cart-section">
        <button
            mat-icon-button
            routerLink="/cart"
            [matBadge]="cartItemCount()"
            [matBadgeHidden]="cartItemCount() === 0"
            matBadgeColor="accent"
            aria-label="Shopping cart"
            title="Shopping Cart"
        >
            <mat-icon>shopping_cart</mat-icon>
        </button>
    </div>
    <div class="user-section">
        @if (authChecked$ | async) {
            @if (userProfile$ | async) {
                <div class="logged-in">
                    <span class="welcome-message"
                        >Welcome, {{ (userProfile$ | async)?.firstName }}!</span
                    >
                    <button
                        (click)="logout()"
                        matButton="outlined"
                        extended
                        [title]="'Logout'"
                        aria-label="logout button"
                        class="logout-button"
                    >
                        <mat-icon>logout</mat-icon>
                        Logout
                    </button>
                </div>
            } @else {
                <div class="logged-out">
                    <button
                        (click)="openLoginDialog($event)"
                        matButton="outlined"
                        extended
                        [title]="'Login'"
                        aria-label="login button"
                        class="login-button"
                    >
                        <mat-icon>login</mat-icon>
                        Login
                    </button>
                    <button
                        (click)="openCreateAccountDialog($event)"
                        matButton="outlined"
                        extended
                        [title]="'Sign Up'"
                        aria-label="sign up button"
                        class="signup-button"
                    >
                        <mat-icon>person_add</mat-icon>
                        Sign Up
                    </button>
                </div>
            }
        } @else {
            <div class="loading">
                <span>Loading...</span>
            </div>
        }
    </div>
</mat-toolbar>
